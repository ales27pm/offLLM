# Offline LLM App

Offline LLM application with advanced optimizations.

## Requirements

- Node **20**, Ruby **3.2**, Bundler
- **Xcode 16.4** with **iOS 18.5** SDK (CI uses `macos-15`)
- CocoaPods
- XcodeGen

## Project Targets

- **iOS target & scheme:** `monGARS`
- **Deployment target:** iOS **18.0**
- Workspace is generated by CocoaPods: `ios/monGARS.xcworkspace`

## Getting Started (iOS)

```bash
npm ci
(cd ios && xcodegen generate && bundle install && bundle exec pod install --repo-update)
./scripts/ios_doctor.sh
npx react-native run-ios --scheme monGARS
```

Or build with xcodebuild (simulator):

```bash
xcodebuild \
  -workspace ios/monGARS.xcworkspace \
  -scheme monGARS \
  -sdk iphonesimulator \
  -configuration Debug build
```

## CI (GitHub Actions)

- Unsigned iOS IPA is built by `.github/workflows/ios-unsigned.yml` on macos-15.
  - Artifacts: `ios-unsigned-ipa` (contains the unsigned `.ipa`, zipped `.app`, `.xcresult`, and build logs)
    - IPA filename: `${XCODE_SCHEME}.ipa` (currently `monGARS.ipa`)
    - .app bundle zip filename: `${XCODE_SCHEME}.zip` (currently `monGARS.zip`)
- Caches:
  - Node: keyed by `hashFiles('package-lock.json')`
  - Pods: keyed by `hashFiles('ios/Podfile.lock')` + `XCODE_VERSION`
  - (Optional) DerivedData for faster PR rebuilds

## Codegen

If you modify TurboModules or RN codegen specs:

```bash
npm run codegen
```

## Troubleshooting

- If `pod install` does not produce `ios/monGARS.xcworkspace`, run `./scripts/ios_doctor.sh` and check the Podfileâ€™s project autodetect.
- File-list related build errors are avoided by `DISABLE_INPUT_OUTPUT_PATHS=YES` in the Podfile `post_install`.

## Contributing

See [AGENTS.md](AGENTS.md).

## Reporting Bugs

To report a bug, please follow these steps:

1. Go to the [Issues](https://github.com/ales27pm/offLLM/issues) page of the repository.
2. Click on the **New Issue** button.
3. Select the appropriate template if available (e.g., Bug Report).
4. Fill out the form with as much detail as possible:
   - A descriptive title that summarizes the issue.
   - Steps to reproduce the bug.
   - Expected behavior.
   - Actual behavior.
   - Screenshots or logs, if applicable.
   - Any additional context that might help in resolving the issue.

## Checked-in Apple build outputs

For now this repository keeps the CocoaPods workspace and related generated artefacts under version control. Working as a solo maintainer makes it practical to accept the churn from these files, and having them present lets the Linux development environment run native-flavoured tests without rebuilding the entire workspace locally.

### Tracked generated paths

- `ios/Pods/`
- `ios/*.xcworkspace`
- `*.xcfilelist`

### Operational notes

- `DerivedData/` is cleaned and regenerated by the doctor script; do not commit it.
- Regenerate the workspace with `bundle exec pod install` whenever Pod dependencies change so the committed files stay in sync.
- If CI or Doctor detects drift, re-run the iOS doctor script to update the tracked artefacts before pushing.
